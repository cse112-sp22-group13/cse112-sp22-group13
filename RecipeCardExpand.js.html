<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RecipeCardExpand.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: RecipeCardExpand.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { searchForKey, getInstructionSteps } from './searchKey.js';
import { editRecipe, saveRecipe } from './recipeExpand.js';

class RecipeCardExpand extends HTMLElement {
  constructor () {
    super();
    this.attachShadow({ mode: 'open' });
  }

  /**
   * @return {Object} The HTML structure of recipe expand
   */
  get data () {
    return this.shadowRoot;
  }

  /**
   * @param {String} data The data to turn into JSOn and parse.
   */
  set data (data) {
    const recipeData = JSON.parse(data);
    console.log(recipeData);

    // Apply styling to the shadow dom
    const linkStyleSheet = document.createElement('link');
    linkStyleSheet.setAttribute('rel', 'stylesheet');
    linkStyleSheet.setAttribute('href', './recipe_expand.css');
    this.shadowRoot.appendChild(linkStyleSheet);

    // Container div + class.
    const recipeExpandContainer = document.createElement('div');
    recipeExpandContainer.classList.add('recipe-expand-grid-container');

    // Recipe title p + class.
    const recipeExpandTitle = document.createElement('p');
    recipeExpandTitle.classList.add('recipe-expand-title');
    recipeExpandTitle.innerText = searchForKey(recipeData, 'title');
    recipeExpandContainer.appendChild(recipeExpandTitle);

    // Recipe img container + class.
    const recipeExpandImgContainer = document.createElement('div');
    recipeExpandImgContainer.classList.add('recipe-img-container');
    // Recipe img + class
    const recipeExpandImg = document.createElement('img');
    recipeExpandImg.src = recipeData.image;
    recipeExpandImgContainer.appendChild(recipeExpandImg);
    recipeExpandContainer.appendChild(recipeExpandImgContainer);

    // Recipe servings/time container + class.
    const recipeExpandServingsTimeContainer = document.createElement('div');
    recipeExpandServingsTimeContainer.classList.add('recipe-expand-servings-time-container');

    // Recipe servings label + class.
    const recipeExpandServingsLabel = document.createElement('div');
    recipeExpandServingsLabel.classList.add('recipe-servings-label');
    recipeExpandServingsLabel.innerText = 'Servings: ' + searchForKey(recipeData, 'servings');

    // Recipe time label + class.
    const recipeExpandTimeLabel = document.createElement('div');
    recipeExpandTimeLabel.classList.add('recipe-time-label');
    recipeExpandTimeLabel.innerText = 'Time: ' + searchForKey(recipeData, 'readyInMinutes') + ' minutes';

    // Construct the servings/time container and append to recipe expand.
    recipeExpandServingsTimeContainer.appendChild(recipeExpandServingsLabel);
    recipeExpandServingsTimeContainer.appendChild(recipeExpandTimeLabel);
    recipeExpandContainer.appendChild(recipeExpandServingsTimeContainer);

    // Recipe ingredients container + class.
    const recipeExpandIngredientsContainer = document.createElement('div');
    recipeExpandIngredientsContainer.classList.add('recipe-expand-ingredients-container');
    recipeExpandIngredientsContainer.id = 'ingredientContainer';

    // Recipe ingredients list + class.
    const recipeExpandIngredientsList = document.createElement('ul');
    recipeExpandIngredientsList.classList.add('recipe-expand-ingredients-list');
    recipeExpandIngredientsList.id = 'ingredientList';
    recipeExpandIngredientsList.innerText = 'Ingredients:';

    // Parse the recipe's ingredients and appends them to the list.
    // NOTE: We use original here, which may or may not contain appropriate
    // # of units + ingredient name. The alternative is to parse amount,
    // unit, meta/metaInformation, and name to reconstruct the correct info.
    const ingredientsList = searchForKey(recipeData, 'extendedIngredients');
    for (let i = 0; i &lt; ingredientsList.length; i++) {
      const recipeExpandIngredients = document.createElement('li');

      if (ingredientsList[i].unit === '') {
        recipeExpandIngredients.innerText = ingredientsList[i].amount +
          ' ' + ingredientsList[i].originalName;
      } else {
        recipeExpandIngredients.innerText = ingredientsList[i].amount +
          ' ' + ingredientsList[i].unit +
          ' ' + ingredientsList[i].originalName;
      }

      recipeExpandIngredientsList.appendChild(recipeExpandIngredients);
    }

    // Construct the ingredients container and append to recipe expand.
    recipeExpandIngredientsContainer.appendChild(recipeExpandIngredientsList);
    recipeExpandContainer.appendChild(recipeExpandIngredientsContainer);

    // Recipe instructions container + class.
    const recipeExpandInstructionsContainer = document.createElement('div');
    recipeExpandInstructionsContainer.classList.add('recipe-expand-instructions-container');

    // Recipe instructions list + class.
    const recipeExpandInstructionsList = document.createElement('ol');
    recipeExpandInstructionsList.classList.add('recipe-expand-instructions-list');
    recipeExpandInstructionsList.innerText = 'Instructions:';

    // Parse the recipe's instructions and appends them to the list.
    // NOTE: We also parse for supplies here, since we can't obtain them
    // any other way without making another network call.
    const instructionsList = getInstructionSteps(recipeData);
    const suppliesList = [];
    if ( instructionsList !== undefined) {
      for (let i = 0; i &lt; instructionsList.length; i++) {
        const recipeExpandInstructions = document.createElement('li');
        recipeExpandInstructions.innerText = instructionsList[i].step;
        recipeExpandInstructionsList.appendChild(recipeExpandInstructions);
  
        // Parse the instruction for the associated supplies.
        const parsedSupplies = instructionsList[i].equipment;
        // Iterate through the associated parsed supplies. If the element
        // is not in the supplies list, add it.
        for (let j = 0; j &lt; parsedSupplies.length; j++) {
          if (!(suppliesList.filter((e) => e.id === parsedSupplies[j].id).length > 0)) {
            suppliesList.push(parsedSupplies[j]);
          }
        }
      }
    }

    // Recipe supplies container + class.
    const recipeExpandSuppliesContainer = document.createElement('div');
    recipeExpandSuppliesContainer.classList.add('recipe-expand-supplies-container');

    // Recipe supplies list + class.
    const recipeExpandSuppliesList = document.createElement('ul');
    recipeExpandSuppliesList.classList.add('recipe-expand-supplies-list');
    recipeExpandSuppliesList.innerText = 'Supplies:';

    // Parse the recipe's supplies that we obtained earlier.
    for (let i = 0; i &lt; suppliesList.length; i++) {
      const recipeExpandSupplies = document.createElement('li');
      recipeExpandSupplies.innerText = suppliesList[i].name;
      recipeExpandSuppliesList.appendChild(recipeExpandSupplies);
    }

    // Construct the instructions container. Construct the supplies
    // container. Append instructions after supplies.
    recipeExpandSuppliesContainer.appendChild(recipeExpandSuppliesList);
    recipeExpandInstructionsContainer.appendChild(recipeExpandInstructionsList);
    recipeExpandContainer.appendChild(recipeExpandSuppliesContainer);
    recipeExpandContainer.appendChild(recipeExpandInstructionsContainer);

    // Delvin's code, adds a cook view button to the bottom of the html structure.
    const recipeExpandButton = document.createElement('button');
    recipeExpandButton.classList.add('recipe-expand-button');
    recipeExpandButton.innerText = 'See Cook View';
    recipeExpandButton.addEventListener('click', () => {
      const recipeId = window.location.hash.substring(1);
      console.log('clicked', recipeId);
      window.location.href = `../cook_view/cook_view.html#${recipeId}`;
    });
    recipeExpandContainer.appendChild(recipeExpandButton);

    // Example getting the title + class
    // Recipe Title
    const recipeInputForm = document.createElement('form');
    recipeInputForm.classList.add('recipe-form');

    // Example converting the info to text and replacing it.
    const recipeInputFormInput = document.createElement('input');
    recipeInputFormInput.setAttribute('type', 'text');
    recipeInputForm.appendChild(recipeInputFormInput);
    recipeInputFormInput.value = searchForKey(recipeData, 'servings');
    recipeInputForm.addEventListener('submit', function (e) { 
      e.preventDefault();
      saveRecipe();
      return false; });
    recipeInputForm.classList.add('hidden');
    recipeInputFormInput.classList.add('hidden');
    recipeExpandContainer.appendChild(recipeInputForm);

    // Submit button
    const submitButtonDiv = document.createElement('div');
    submitButtonDiv.id = 'submitButton';
    submitButtonDiv.classList.add('submit-div');
    const submitButton = document.createElement('button');
    submitButton.classList.add('submitbtn');
    submitButtonDiv.classList.add('hidden');
    submitButton.classList.add('hidden');
    submitButton.innerText = 'Submit';
    submitButton.addEventListener('click', () => { saveRecipe(); });
    submitButtonDiv.appendChild(submitButton);
    recipeExpandContainer.appendChild(submitButtonDiv);

    // Edit button
    const editButtonDiv = document.createElement('div');
    editButtonDiv.id = 'editButton';
    editButtonDiv.classList.add('edit-div');
    const editButton = document.createElement('button');
    editButton.classList.add('editbtn');
    editButton.innerText = 'Edit Serving Size';
    editButton.addEventListener('click', () => { editRecipe(); });
    editButtonDiv.appendChild(editButton);
    recipeExpandContainer.appendChild(editButtonDiv);

    // Append the container to the shadowroot.
    this.shadowRoot.appendChild(recipeExpandContainer);

    const styleElem = document.createElement('style');
    styleElem.innerHTML = `
    .recipe-expand-grid-container {
      margin: 0;
      font-size: 1.5rem;
      color: whitesmoke;
      font-weight: 300;
    }

    .recipe-expand-title {
      font-size: 2.5rem;
      font-weight: 600;
      color: whitesmoke;
      text-align: center;
      padding: 0 0 1rem 0;
      margin: 0;
    }

    .recipe-img-container {
      text-align: center;
    }

    .recipe-expand-servings-time-container {
      position: relative;
      display: flex;
      text-align: center;
      padding: 2rem 0 0 0;
    }

    .recipe-time-label {
      flex: 60%;
    }

    .recipe-servings-label {
      flex: 50%;
    }
    
    .recipe-expand-ingredients-container  {
      padding-left: 4.5rem;
      margin: 0;
    }

    .recipe-expand-supplies-container {
      padding-left: 4.5rem;
      margin: 0;
    }

    .recipe-expand-instructions-container {
      padding-left: 4.5rem;
      margin: 0;
    }
    
    li {
      width: 90%;
    }
    `;

    this.shadowRoot.append(styleElem, recipeExpandContainer);
  }
}

// Define the custom recipe expand container html element.
customElements.define('recipe-card-expand-container', RecipeCardExpand);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ComplexSearch.html">ComplexSearch</a></li><li><a href="GenericFetch.html">GenericFetch</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addRecipe">addRecipe</a></li><li><a href="global.html#bindEnterKey">bindEnterKey</a></li><li><a href="global.html#checkDup">checkDup</a></li><li><a href="global.html#clickNav">clickNav</a></li><li><a href="global.html#createCookView">createCookView</a></li><li><a href="global.html#createFavCards">createFavCards</a></li><li><a href="global.html#createRecipeCards">createRecipeCards</a></li><li><a href="global.html#createRecipeExpand">createRecipeExpand</a></li><li><a href="global.html#deleteRecipe">deleteRecipe</a></li><li><a href="global.html#editRecipe">editRecipe</a></li><li><a href="global.html#extraction">extraction</a></li><li><a href="global.html#fillPopular">fillPopular</a></li><li><a href="global.html#getInstructionSteps">getInstructionSteps</a></li><li><a href="global.html#getRecipesNotContainingKeyword">getRecipesNotContainingKeyword</a></li><li><a href="global.html#getTags">getTags</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#insertAtIndex">insertAtIndex</a></li><li><a href="global.html#markFav">markFav</a></li><li><a href="global.html#resetCards">resetCards</a></li><li><a href="global.html#saveRecipe">saveRecipe</a></li><li><a href="global.html#searchForKey">searchForKey</a></li><li><a href="global.html#searchRecipes">searchRecipes</a></li><li><a href="global.html#unFav">unFav</a></li><li><a href="global.html#updateRecipeServings">updateRecipeServings</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Mon Dec 06 2021 21:57:47 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
